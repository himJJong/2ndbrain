### N+1 문제란?

- 연관 관계에서 발생하는 이슈로 연관 관계가 설정된 엔티티를 조회할 경우 조회된 데이터 갯수 만큼 연관관계의 조회 쿼리가 추가로 발생하여 데이터를 읽어오게 된다.

```java

    @Entity
    @Getter
    @Setter
    @NoArgsConstructor
    public class Owner {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;
    private String name;

    @OneToMany(mappedBy = "owner", fetch = FetchType.EAGER)
    private Set<Cat> cats = new LinkedHashSet<>();

     ~~~~~
	
    @Entity
    @Getter
    @Setter
    @NoArgsConstructor
    public class Cat {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;
    private String name;

    @ManyToOne
    private Owner owner;

    public Cat(String name) {
        this.name = name;
     }
    }
    
```

위 FetchType을 LAZY로 변경하면 쿼리는 하나만 호출된다. 그렇다면 해결된걸까??
: 정답은 NO!!!


LAZT로 설정한것은 연관관계 데이터를 프록시 객체로 바인딩한다는 것인데, 실제로 우리는 연관관계 엔티티를 프록시만으로는 사용하지 않는다. 실제로 연관관계 엔티티의 멤버 변수를 사용하거나, 가공하는 일은 코드를 구현하는 경우가 훨씬 흔하기 때문에 테스트 코드에서 연관관계 엔티티를 사용하는 로직을 추가해서 확인하면 결국 EAGER와 동일한 결과가 발생한다.


####

